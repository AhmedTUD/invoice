# ميزة إدارة الموديلات - FSMI TV & HA By SmartSense

## نظرة عامة
تم إضافة نظام شامل لإدارة الموديلات في لوحة التحكم، مما يتيح للمشرفين إضافة وتعديل وحذف الموديلات بسهولة.

## الميزات الجديدة

### 1. إدارة الموديلات في لوحة التحكم
- **زر إدارة الموديلات**: زر جديد في لوحة التحكم للوصول السريع لإدارة الموديلات
- **واجهة شاملة**: نافذة منبثقة كاملة لإدارة جميع الموديلات
- **عرض منظم**: جدول يعرض اسم الموديل، الفئة، الوصف، والحالة

### 2. إضافة موديلات جديدة
- **نموذج سهل**: نموذج بسيط لإضافة موديل جديد
- **حقول مطلوبة**: اسم الموديل والفئة (مطلوبان)
- **حقول اختيارية**: الوصف (اختياري)
- **التحقق من التكرار**: منع إضافة موديلات بأسماء مكررة

### 3. تعديل الموديلات الموجودة
- **تعديل سريع**: إمكانية تعديل جميع بيانات الموديل
- **تفعيل/إلغاء تفعيل**: إمكانية تفعيل أو إلغاء تفعيل الموديلات
- **حفظ آمن**: التحقق من صحة البيانات قبل الحفظ

### 4. حذف الموديلات
- **حذف آمن**: التحقق من عدم استخدام الموديل في فواتير موجودة
- **رسائل تحذيرية**: تحذير المستخدم قبل الحذف
- **منع الحذف**: منع حذف الموديلات المستخدمة في الفواتير

## التحديثات التقنية

### 1. قاعدة البيانات
```sql
-- جدول الموديلات الجديد
CREATE TABLE models (
  id TEXT PRIMARY KEY,
  name TEXT UNIQUE NOT NULL,
  category TEXT NOT NULL,
  description TEXT,
  isActive INTEGER DEFAULT 1,
  createdAt TEXT NOT NULL,
  updatedAt TEXT NOT NULL
)
```

### 2. API Endpoints الجديدة
- `GET /api/models` - جلب جميع الموديلات
- `GET /api/models/active` - جلب الموديلات النشطة فقط
- `POST /api/models` - إضافة موديل جديد
- `PUT /api/models/:id` - تحديث موديل موجود
- `DELETE /api/models/:id` - حذف موديل

### 3. تحديث واجهة إدخال الفواتير
- **تحميل ديناميكي**: تحميل الموديلات من قاعدة البيانات بدلاً من القائمة الثابتة
- **بحث محسن**: البحث في اسم الموديل والفئة
- **عرض تفصيلي**: عرض اسم الموديل، الفئة، والوصف في القائمة المنسدلة
- **تحديث تلقائي**: تحديث القائمة عند إضافة موديلات جديدة

## الموديلات الافتراضية
تم إضافة 5 موديلات افتراضية عند بدء التشغيل:

1. **RS68AB820B1/MR** - ثلاجات - ثلاجة سامسونج 820 لتر
2. **WW11B944DGB/AS** - غسالات - غسالة سامسونج 11 كيلو
3. **AR12TXHQASINMG** - تكييفات - تكييف سامسونج 12 وحدة
4. **UE55AU7000UXEG** - تلفزيونات - تلفزيون سامسونج 55 بوصة
5. **MS23K3513AS/EG** - ميكروويف - ميكروويف سامسونج 23 لتر

## كيفية الاستخدام

### للمشرفين:
1. **الدخول للوحة التحكم**: تسجيل الدخول كمشرف
2. **فتح إدارة الموديلات**: النقر على زر "إدارة الموديلات" (أيقونة الصندوق البنفسجية)
3. **إضافة موديل جديد**: النقر على "إضافة موديل جديد" وملء البيانات
4. **تعديل موديل**: النقر على أيقونة التعديل بجانب الموديل المطلوب
5. **حذف موديل**: النقر على أيقونة الحذف (مع التأكد من عدم استخدامه)

### للموظفين:
1. **اختيار الموديل**: في نموذج إدخال الفاتورة، البحث في قائمة الموديلات المحدثة
2. **البحث المحسن**: كتابة اسم الموديل أو الفئة للبحث السريع
3. **معلومات تفصيلية**: رؤية اسم الموديل، الفئة، والوصف عند الاختيار

## الأمان والحماية

### 1. التحقق من الصلاحيات
- جميع عمليات إدارة الموديلات تتطلب جلسة مشرف صالحة
- التحقق من صحة الجلسة قبل كل عملية

### 2. التحقق من البيانات
- التأكد من عدم وجود أسماء موديلات مكررة
- التحقق من وجود البيانات المطلوبة
- منع حذف الموديلات المستخدمة في الفواتير

### 3. رسائل الخطأ الواضحة
- رسائل خطأ مفهومة للمستخدم
- تحذيرات قبل العمليات الحساسة
- تأكيدات نجاح العمليات

## الفوائد

### 1. للمشرفين:
- **مرونة كاملة**: إضافة موديلات جديدة دون الحاجة لتعديل الكود
- **إدارة سهلة**: واجهة بسيطة وواضحة لإدارة الموديلات
- **تحكم كامل**: تفعيل/إلغاء تفعيل الموديلات حسب الحاجة

### 2. للموظفين:
- **قائمة محدثة**: دائماً أحدث الموديلات المتاحة
- **بحث أسرع**: بحث محسن في الموديلات
- **معلومات أكثر**: رؤية تفاصيل الموديل عند الاختيار

### 3. للنظام:
- **قابلية التوسع**: سهولة إضافة موديلات جديدة في المستقبل
- **أداء محسن**: تحميل الموديلات من قاعدة البيانات
- **صيانة أسهل**: لا حاجة لتعديل الكود لإضافة موديلات

## ملاحظات مهمة

1. **النسخ الاحتياطية**: يُنصح بعمل نسخة احتياطية من قاعدة البيانات قبل حذف الموديلات
2. **الموديلات المستخدمة**: لا يمكن حذف الموديلات المستخدمة في فواتير موجودة
3. **الموديلات غير النشطة**: الموديلات غير النشطة لا تظهر في نماذج إدخال الفواتير الجديدة
4. **التحديث التلقائي**: تحديث قوائم الموديلات يتم تلقائياً عند إضافة أو تعديل الموديلات

## التطوير المستقبلي

### إمكانيات للتحسين:
1. **استيراد/تصدير**: إمكانية استيراد وتصدير قوائم الموديلات
2. **فئات متقدمة**: إدارة فئات الموديلات بشكل منفصل
3. **صور الموديلات**: إضافة صور للموديلات
4. **تاريخ الموديلات**: تتبع تاريخ إضافة وتعديل الموديلات
5. **إحصائيات الاستخدام**: عرض إحصائيات استخدام كل موديل

---

**تاريخ الإنشاء**: 19 يناير 2026  
**الإصدار**: 1.0  
**المطور**: Kiro AI Assistant